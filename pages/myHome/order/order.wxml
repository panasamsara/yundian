<!--pages/myhome/order/order.wxml-->
<view class="content">
  <scroll-view scroll-x="true" class="tab-h" scroll-left="{{scrollLeft}}">
    <view class="tab-item {{currentTab==0?'active':''}}" data-current="0" bindtap="swichNav">
      <span>全部</span>
    </view>
    <view class="tab-item {{currentTab==1?'active':''}}" data-current="1" bindtap="swichNav">
      <span>待付款</span>
    </view>
    <view class="tab-item {{currentTab==2?'active':''}}" data-current="2" bindtap="swichNav">
      <span>待发货</span>
    </view>
    <view class="tab-item {{currentTab==3?'active':''}}" data-current="3" bindtap="swichNav">
      <span>待收货</span>
    </view>
    <view class="tab-item {{currentTab==4?'active':''}}" data-current="4" bindtap="swichNav">
      <span>待评价</span>
    </view>
  </scroll-view>
  <swiper class="tab-content" current="{{currentTab}}" duration="300" bindchange="switchTab" style="height:{{winHeight}}rpx" >
    <swiper-item wx:for="{{[0,1,2,3,4]}}">
      <view  class="scoll-h" lower-threshold="0" style="height:{{winHeight}}rpx">
        <block wx:if="{{length>0}}" wx:for='{{goodlist}}' wx:for-index="inx"  wx:key="*this" wx:for-item='item'>
          <view class='detail' data-index="{{inx}}">
            <view class='detail-top'>
              <image src='../images/shopDefault.png'></image>
              <text class='detail-tit'>{{item.shopName}}</text>  
              <image class="back" bindtap="shopSkip" src='../../../images/yundian_spxq_gengduo.png'></image>
              <text >{{item.orderStatusStr}}</text>
            </view>
            <view class='goods' wx:for='{{item.orderItemList}}' wx:for-item='items' wx:key="goods">
              <view class='good-content' data-pindex="{{inx}}" data-index="{{index}}" data-id="{{items.id}}" >
                <view class='good-left' data-pindex="{{inx}}" data-index="{{index}}" data-id="{{items.id}}">
                  <image class='good-img' src='{{items.pictureUrl}}'></image>
                </view>
                <view class='right-info'>
                  <text>{{items.goodsName}}</text>
                  <text wx:if="{{items.stockName}}">{{items.stockName}}</text>
                  <view class='detail-down'>
                    <text>￥</text><text>{{items.goodsPrice}}</text>
                    <text>x{{items.goodsNum}}</text>
                  </view>
                    <button wx:if="{{item.orderStatusVo==4}}" class='appraise-btn' type="default" size="{{defaultSize}}" loading="{{loading}}" plain="{{plain}}" bindtap="appraise" hover-class="other-button-hover" data-no="{{item.orderNo}}" data-shopid="{{item.bussinessId}}" data-goodid="{{items.goodsId}}"> 评价 </button> 
                </view>
              </view>
            </view>  
            <view class='list-total'>
          <view class="total-num">共<span>{{item.total}}</span>件商品</view>
          <view class='total-price'>合计：<span>￥{{item.amount}}</span>（含运费<span>{{item.deliveryMoney}}</span>）</view>
        </view>
        <view class="ctronl-btn">
               <button wx:if="{{item.orderStatusVo==1}}" class='cancel-btn' type="default" size="{{defaultSize}}" loading="{{loading}}" plain="{{plain}}" bindtap="cancel" hover-class="other-button-hover" data-no="{{item.orderNo}}"> 取消订单 </button>
               <button wx:if="{{item.orderStatusVo==1}}" class='pay-btn' type="default" size="{{defaultSize}}" loading="{{loading}}" plain="{{plain}}" bindtap="pay" hover-class="other-button-hover" data-no="{{item.orderNo}}"> 付款 </button>
               <button wx:if="{{item.orderStatusVo==2 && item.deliveryType!=2}}" class='reimburse-btn' type="default" size="{{defaultSize}}" loading="{{loading}}" plain="{{plain}}" bindtap="reimburse" hover-class="other-button-hover" data-no="{{item.orderNo}}" data-statu="{{item.orderStatus}}" data-money="{{item.amount}}"> 申请退款 </button>
               <button wx:if="{{item.orderStatusVo==2 && item.deliveryType!=2}}" class='shipments-btn' type="default" size="{{defaultSize}}" loading="{{loading}}" plain="{{plain}}" bindtap="shipments" hover-class="other-button-hover" data-no="{{item.orderNo}}"> 提醒发货 </button>
               <button wx:if="{{item.orderStatusVo==2 && item.deliveryType==2}}" class='take-btn' type="default" size="{{defaultSize}}" loading="{{loading}}" plain="{{plain}}" bindtap="take" hover-class="other-button-hover" data-no="{{item.orderNo}}" data-customerid="{{item.customerId}}"> 确认收货 </button>
              <button wx:if="{{item.orderStatusVo==4}}" class='return-btn' type="default" size="{{defaultSize}}" loading="{{loading}}" plain="{{plain}}" bindtap="returnGood" hover-class="other-button-hover" data-no="{{item.orderNo}}" data-statu="{{item.orderStatus}}" data-money="{{item.amount}}"> 申请退货 </button>
              <button wx:if="{{item.orderStatusVo==5 || item.orderStatusVo==8 || item.orderStatusVo==9 || item.orderStatusVo==10}}" class='delete-btn' type="default" size="{{defaultSize}}" loading="{{loading}}" plain="{{plain}}" bindtap="delete" hover-class="other-button-hover" data-no="{{item.orderNo}}" data-shopid="{{item.bussinessId}}" data-customerid="{{item.customerId}}" data-goodid="{{items.goodsId}}" > 删除订单
               </button>
               <button wx:if="{{item.orderStatusVo==6}}" class='audit-btn' type="default" size="{{defaultSize}}" loading="{{loading}}" plain="{{plain}}" bindtap="audit" hover-class="other-button-hover" data-no="{{item.orderNo}}"> 退款中 </button>
               <button wx:if="{{item.orderStatusVo==7}}" class='audit-btn' type="default" size="{{defaultSize}}" loading="{{loading}}" plain="{{plain}}" bindtap="audit" hover-class="other-button-hover" data-no="{{item.orderNo}}"> 退货中 </button>
              </view>
            </view>
        </block>
        <block wx:if="{{length==0}}">
          <image class="empty" src="../../../images/empty.png"></image>
        </block>
      </view>
    <view class="weui-loadmore weui-loadmore_line" hidden='{{hasmoreData}}'>
      <view class="weui-loadmore__tips weui-loadmore__tips_in-line">暂无更多数据</view>
    </view>
    <view class="weui-loadmore" hidden='{{hiddenloading}}'>
      <view class="weui-loading"></view>
      <view class="weui-loadmore__tips">正在加载</view>
    </view>
    </swiper-item>
  </swiper>
</view>
